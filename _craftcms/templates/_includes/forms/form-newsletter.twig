<div class="formContainer formContainer--newsletter js-formContainer--newsletter">
    <div class="formSuccess formSuccess--newsletter">
        <span class="formSuccess-loading formSuccess-loading--newsletter"></span>
    </div>

    {% set form = craft.formerly.form('newsletter') %} 
    <form class="form form--newsletter js-form--newsletter row" method="post" enctype="multipart/form-data"  accept-charset="utf-8">
        {{ getCsrfInput() }}

        <input type="hidden" name="action" value="formerly/submissions/postSubmission">
        <input type="hidden" name="redirect" value="{{ craft.request.url }}?ok=1">
        <input type="hidden" name="formId" value="{{ form.id }}">

        {% cache unless not craft.config.cache %}
            {% for question in form.getQuestions() %}
                {% switch question.type %}
                    {% case 'Email' %}
                    <div class="form-field col--9 col--10xs">
                        <label class="srOnly" for="{{ question.handle }}">
                            {{ question.name }}{% if question.required %}&nbsp;<em>*</em>{% endif %}
                        </label>
                        <input type="email"
                            {% if question.required %}
                                required
                                data-val-required="'{{ question.name }}' is required"
                                data-val="true"
                            {% endif %}
                            {% if question.errorMessage %}
                                data-validator-error-message="{{ question.errorMessage }}"
                            {% endif %}
                            {% if question.validationPattern %}
                                pattern="{{ question.validationPattern }}"
                            {% endif %}
                            placeholder="Enter your email"
                            id="{{ question.handle }}"
                            name="questions[{{ question.handle }}]"
                            value="{{ submission is defined ? submission[question.handle] }}">
                        </div>
                {% endswitch %}
            {% endfor %}
        {% endcache %}

        {% if craft.config.formerly is defined and craft.config.formerly.honeyPotName is defined %}
            <input class="hidden" id="formerly-hp-sec_newsletter-form" type="text" name="{{ craft.config.formerly.honeyPotName }}" />
        {% endif %}
         <div class="form-submit form-submit--newsletter col--2">
            <button class="button" type="submit"><i class="fa fa-angle-right fa-2x"></i></button>
        </div>
    </form>
</div>